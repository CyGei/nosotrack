<!DOCTYPE HTML>
<html>

<head>
	<title>NosoTrack</title>
	<meta charset="utf-8" />
	<meta name="viewport" content="width=device-width, initial-scale=1, user-scalable=no" />
	<link rel="stylesheet" href="assets/css/main.css" />
	<noscript>
		<link rel="stylesheet" href="assets/css/noscript.css" />
	</noscript>
	<link rel="stylesheet" href="https://unpkg.com/vis-network/styles/vis-network.css" />

	<style>
		#network-canvas {
			position: fixed;
			top: 0;
			left: 0;
			width: 100%;
			height: 100%;
			z-index: 0;
			pointer-events: none;
		}

		/* Ensure the wrapper sits above the canvas */
		#wrapper {
			position: relative;
			z-index: 2;
		}

		/* Ensure the background div sits behind the canvas */
		#bg {
			z-index: -1;
		}
	</style>
</head>

<body class="is-preload">

	<canvas id="network-canvas"></canvas>

	<div id="wrapper">

		<header id="header">
			<link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css" rel="stylesheet">

			<div class="logo">
				<span class="fa-solid fa-biohazard"></span>
			</div>

			<div class="content">
				<div class="inner">
					<h1>NosoTrack</h1>
					<p>A Real-Time Platform for Nosocomial Outbreak Analytics </p>
				</div>
			</div>
			<nav>
				<ul>
					<li><a href="#intro">Intro</a></li>
					<li><a href="#research">Research</a></li>
					<li><a href="#contact">Contact</a></li>
				</ul>
			</nav>
		</header>

		<div id="main">

			<article id="intro">
				<h2 class="major">Intro</h2>
				<div style="display: grid; grid-template-columns: repeat(3, 1fr); gap: 10px; margin-bottom: 2rem;">
					<div
						style="background: rgba(255, 255, 255, 0.05); padding: 15px; border-radius: 4px; text-align: center; border-bottom: 2px solid #ff073a;">
						<span style="display:block; font-size:0.7rem; color:#888; letter-spacing:1px;">CASES</span>
						<span style="font-size:1.5rem; font-weight:bold; color:#fff;">2.0M</span>
						<span style="display:block; font-size:0.65rem; color:#aaa; margin-top:4px;">US per year</span>
					</div>
					<div
						style="background: rgba(255, 255, 255, 0.05); padding: 15px; border-radius: 4px; text-align: center; border-bottom: 2px solid #ff073a;">
						<span style="display: block; font-size: 0.7rem; color: #888; letter-spacing: 1px;">DEATHS</span>
						<span style="font-size: 1.5rem; font-weight: bold; color: #fff;">100K</span>
						<span style="display:block; font-size:0.65rem; color:#aaa; margin-top:4px;">US per year</span>
					</div>
					<div
						style="background: rgba(255, 255, 255, 0.05); padding: 15px; border-radius: 4px; text-align: center; border-bottom: 2px solid #ff073a;">
						<span style="display: block; font-size: 0.7rem; color: #888; letter-spacing: 1px;">ECON.
							BURDEN</span>
						<span style="font-size: 1.5rem; font-weight: bold; color: #fff;">$40B+</span>
						<span style="display:block; font-size:0.65rem; color:#aaa; margin-top:4px;">US per year</span>

					</div>
				</div>
				<p style="text-align: justify;">
					<b>Healthcare-associated infections (HAIs)</b> affect approximately 1 in 10 patients worldwide,
					causing significant morbidity, mortality, and economic strain on healthcare systems. <b>Nosocomial
						outbreaks</b>
					driven by person to person transmitted pathogens such as SARS-CoV-2, <em>Clostridioides
						difficile</em>, <em>Klebsiella pneumoniae</em>, and MRSA generate the most acute clinical and
					operational crises, triggering staff shortages, ward closures, and delayed procedures.
					Current control measures rely on broad testing and isolation protocols, but <b>effective
						intervention
						requires identifying the specific drivers of an outbreak</b>: such as patient zero,
					superspreaders, transmission routes, and undetected or imported cases. <br><br>
					<span
						style="color: red; font-weight: bold; font-family: Consolas, 'Courier New', Monaco, monospace; font-size: 24px;">
						NosoTrack
					</span>
					<b>is an outbreak
						analytics platform that infers who infected whom in near real-time</b> by integrating data from
					hospital Electronic Health Records with Bluetooth enabled contact tracing.It delivers early warnings
					and actionable reports, enabling hospital infection prevention teams to target interventions
					promptly before an outbreak escalates.
				</p>

				<div id="network-container"
					style="position: relative; width:100%; height:400px; border:1px solid rgba(255,255,255,0.1); background: rgba(0,0,0,0.2); border-radius: 4px;">
					<div id="mynetwork" style="width:100%; height:100%;"></div>

					<div id="network-legend" style="
        position: absolute; 
        top: 15px; 
        left: 15px; 
        background: rgba(20, 20, 20, 0.8); 
        padding: 12px; 
        border-radius: 4px; 
        border: 1px solid rgba(255, 255, 255, 0.1); 
        font-family: monospace; 
        font-size: 11px; 
        color: #fff; 
        pointer-events: none;
        letter-spacing: 1px;
    ">
						<div style="display: flex; align-items: center; margin-bottom: 8px;">
							<div
								style="width: 10px; height: 10px; background: #888; border-radius: 50%; margin-right: 10px; box-shadow: 0 0 5px rgba(255,255,255,0.2);">
							</div>
							<span>PATIENT</span>
						</div>
						<div style="display: flex; align-items: center;">
							<div style="
                width: 0; 
                height: 0; 
                border-left: 6px solid transparent; 
                border-right: 6px solid transparent; 
                border-bottom: 11px solid #888; 
                margin-right: 9px;
                filter: drop-shadow(0 0 3px rgba(255,255,255,0.2));
            "></div>
							<span>STAFF</span>
						</div>
					</div>
				</div>

			</article>

			<article id="research">
				<h2 class="major">Research</h2>
				<span class="image main"><img src="images/pic02.jpg" alt="" /></span>
				<p> Novel computational methods that reconstruct who infected whom from clinical, contact, and
					genetic data have a strong track record of generating critical insights informing control
					strategies.
					These approaches have been successfully applied to a wide range of
					pathogens, including <a href="LINK_SARS2">SARS-CoV-2</a>, <a href="LINK_EBOLA">Ebola</a>, <a
						href="LINK_INFLUENZA">influenza</a>, and <a href="LINK_AMR">drug-resistant bacteria</a>.

					Despite their value, these methods are used almost exclusively restrospectively, as they are not
					integrated with
					existing hospital surveillance systems. What is missing is an automated system that can deploy these
					models in near real-time to support proactive intervention. This is the aim of <span
						style="color: red; font-weight: bold; font-family: Consolas, 'Courier New', Monaco, monospace; font-size: 24px;">
						NosoTrack
					</span>. <br><br>

					Publications are available here:
					## DO a nice dynamic list of publications with links to papers
					https://pubmed.ncbi.nlm.nih.gov/35215195/ # A litterature review on outbreak reconstruction methods
					https://link.springer.com/article/10.1186/s12859-018-2330-z # outbreaker2 software
					https://cygei.github.io/o2ools/index.html # o2ools software
					https://journals.plos.org/plosone/article?id=10.1371/journal.pone.0313037 # Associated analytical
					methods
					https://pubmed.ncbi.nlm.nih.gov/40302215/ # Proof of concept using Real-Time Genomic Surveillance
				</p>
			</article>


			<article id="contact">
				<h2 class="major">Contact</h2>
				<form method="post" action="#">
					<div class="fields">
						<div class="field half">
							<label for="name">Name</label>
							<input type="text" name="name" id="name" />
						</div>
						<div class="field half">
							<label for="email">Email</label>
							<input type="text" name="email" id="email" />
						</div>
						<div class="field">
							<label for="message">Message</label>
							<textarea name="message" id="message" rows="4"></textarea>
						</div>
					</div>
					<ul class="actions">
						<li><input type="submit" value="Send Message" class="primary" /></li>
						<li><input type="reset" value="Reset" /></li>
					</ul>
				</form>
				<ul class="icons">
					<li><a href="#" class="icon brands fa-twitter"><span class="label">Twitter</span></a></li>
					<li><a href="#" class="icon brands fa-facebook-f"><span class="label">Facebook</span></a></li>
					<li><a href="#" class="icon brands fa-instagram"><span class="label">Instagram</span></a></li>
					<li><a href="#" class="icon brands fa-github"><span class="label">GitHub</span></a></li>
				</ul>
			</article>

			<article id="elements">
				<h2 class="major">Elements</h2>

				<section>
					<h3 class="major">Text</h3>
					<p>This is <b>bold</b> and this is <strong>strong</strong>. This is <i>italic</i> and this is
						<em>emphasized</em>.
						This is <sup>superscript</sup> text and this is <sub>subscript</sub> text.
						This is <u>underlined</u> and this is code: <code>for (;;) { ... }</code>. Finally, <a
							href="#">this is a link</a>.
					</p>
					<hr />
					<h2>Heading Level 2</h2>
					<h3>Heading Level 3</h3>
					<h4>Heading Level 4</h4>
					<h5>Heading Level 5</h5>
					<h6>Heading Level 6</h6>
					<hr />
					<h4>Blockquote</h4>
					<blockquote>Fringilla nisl. Donec accumsan interdum nisi, quis tincidunt felis sagittis eget tempus
						euismod. Vestibulum ante ipsum primis in faucibus vestibulum. Blandit adipiscing eu felis
						iaculis volutpat ac adipiscing accumsan faucibus. Vestibulum ante ipsum primis in faucibus lorem
						ipsum dolor sit amet nullam adipiscing eu felis.</blockquote>
					<h4>Preformatted</h4>
					<pre><code>i = 0;

while (!deck.isInOrder()) {
    print 'Iteration ' + i;
    deck.shuffle();
    i++;
}

print 'It took ' + i + ' iterations to sort the deck.';</code></pre>
				</section>

				<section>
					<h3 class="major">Lists</h3>

					<h4>Unordered</h4>
					<ul>
						<li>Dolor pulvinar etiam.</li>
						<li>Sagittis adipiscing.</li>
						<li>Felis enim feugiat.</li>
					</ul>

					<h4>Alternate</h4>
					<ul class="alt">
						<li>Dolor pulvinar etiam.</li>
						<li>Sagittis adipiscing.</li>
						<li>Felis enim feugiat.</li>
					</ul>

					<h4>Ordered</h4>
					<ol>
						<li>Dolor pulvinar etiam.</li>
						<li>Etiam vel felis viverra.</li>
						<li>Felis enim feugiat.</li>
						<li>Dolor pulvinar etiam.</li>
						<li>Etiam vel felis lorem.</li>
						<li>Felis enim et feugiat.</li>
					</ol>
					<h4>Icons</h4>
					<ul class="icons">
						<li><a href="#" class="icon brands fa-twitter"><span class="label">Twitter</span></a></li>
						<li><a href="#" class="icon brands fa-facebook-f"><span class="label">Facebook</span></a></li>
						<li><a href="#" class="icon brands fa-instagram"><span class="label">Instagram</span></a></li>
						<li><a href="#" class="icon brands fa-github"><span class="label">Github</span></a></li>
					</ul>

					<h4>Actions</h4>
					<ul class="actions">
						<li><a href="#" class="button primary">Default</a></li>
						<li><a href="#" class="button">Default</a></li>
					</ul>
					<ul class="actions stacked">
						<li><a href="#" class="button primary">Default</a></li>
						<li><a href="#" class="button">Default</a></li>
					</ul>
				</section>

				<section>
					<h3 class="major">Table</h3>
					<h4>Default</h4>
					<div class="table-wrapper">
						<table>
							<thead>
								<tr>
									<th>Name</th>
									<th>Description</th>
									<th>Price</th>
								</tr>
							</thead>
							<tbody>
								<tr>
									<td>Item One</td>
									<td>Ante turpis integer aliquet porttitor.</td>
									<td>29.99</td>
								</tr>
								<tr>
									<td>Item Two</td>
									<td>Vis ac commodo adipiscing arcu aliquet.</td>
									<td>19.99</td>
								</tr>
								<tr>
									<td>Item Three</td>
									<td> Morbi faucibus arcu accumsan lorem.</td>
									<td>29.99</td>
								</tr>
								<tr>
									<td>Item Four</td>
									<td>Vitae integer tempus condimentum.</td>
									<td>19.99</td>
								</tr>
								<tr>
									<td>Item Five</td>
									<td>Ante turpis integer aliquet porttitor.</td>
									<td>29.99</td>
								</tr>
							</tbody>
							<tfoot>
								<tr>
									<td colspan="2"></td>
									<td>100.00</td>
								</tr>
							</tfoot>
						</table>
					</div>

					<h4>Alternate</h4>
					<div class="table-wrapper">
						<table class="alt">
							<thead>
								<tr>
									<th>Name</th>
									<th>Description</th>
									<th>Price</th>
								</tr>
							</thead>
							<tbody>
								<tr>
									<td>Item One</td>
									<td>Ante turpis integer aliquet porttitor.</td>
									<td>29.99</td>
								</tr>
								<tr>
									<td>Item Two</td>
									<td>Vis ac commodo adipiscing arcu aliquet.</td>
									<td>19.99</td>
								</tr>
								<tr>
									<td>Item Three</td>
									<td> Morbi faucibus arcu accumsan lorem.</td>
									<td>29.99</td>
								</tr>
								<tr>
									<td>Item Four</td>
									<td>Vitae integer tempus condimentum.</td>
									<td>19.99</td>
								</tr>
								<tr>
									<td>Item Five</td>
									<td>Ante turpis integer aliquet porttitor.</td>
									<td>29.99</td>
								</tr>
							</tbody>
							<tfoot>
								<tr>
									<td colspan="2"></td>
									<td>100.00</td>
								</tr>
							</tfoot>
						</table>
					</div>
				</section>

				<section>
					<h3 class="major">Buttons</h3>
					<ul class="actions">
						<li><a href="#" class="button primary">Primary</a></li>
						<li><a href="#" class="button">Default</a></li>
					</ul>
					<ul class="actions">
						<li><a href="#" class="button">Default</a></li>
						<li><a href="#" class="button small">Small</a></li>
					</ul>
					<ul class="actions">
						<li><a href="#" class="button primary icon solid fa-download">Icon</a></li>
						<li><a href="#" class="button icon solid fa-download">Icon</a></li>
					</ul>
					<ul class="actions">
						<li><span class="button primary disabled">Disabled</span></li>
						<li><span class="button disabled">Disabled</span></li>
					</ul>
				</section>

				<section>
					<h3 class="major">Form</h3>
					<form method="post" action="#">
						<div class="fields">
							<div class="field half">
								<label for="demo-name">Name</label>
								<input type="text" name="demo-name" id="demo-name" value="" placeholder="Jane Doe" />
							</div>
							<div class="field half">
								<label for="demo-email">Email</label>
								<input type="email" name="demo-email" id="demo-email" value=""
									placeholder="jane@untitled.tld" />
							</div>
							<div class="field">
								<label for="demo-category">Category</label>
								<select name="demo-category" id="demo-category">
									<option value="">-</option>
									<option value="1">Manufacturing</option>
									<option value="1">Shipping</option>
									<option value="1">Administration</option>
									<option value="1">Human Resources</option>
								</select>
							</div>
							<div class="field half">
								<input type="radio" id="demo-priority-low" name="demo-priority" checked>
								<label for="demo-priority-low">Low</label>
							</div>
							<div class="field half">
								<input type="radio" id="demo-priority-high" name="demo-priority">
								<label for="demo-priority-high">High</label>
							</div>
							<div class="field half">
								<input type="checkbox" id="demo-copy" name="demo-copy">
								<label for="demo-copy">Email me a copy</label>
							</div>
							<div class="field half">
								<input type="checkbox" id="demo-human" name="demo-human" checked>
								<label for="demo-human">Not a robot</label>
							</div>
							<div class="field">
								<label for="demo-message">Message</label>
								<textarea name="demo-message" id="demo-message" placeholder="Enter your message"
									rows="6"></textarea>
							</div>
						</div>
						<ul class="actions">
							<li><input type="submit" value="Send Message" class="primary" /></li>
							<li><input type="reset" value="Reset" /></li>
						</ul>
					</form>
				</section>

			</article>

		</div>

		<footer id="footer">
			<p class="copyright">&copy; Cyril Geismar. Design: <a href="https://html5up.net">HTML5 UP</a>.</p>
		</footer>

	</div>

	<div id="bg"></div>

	<script src="assets/js/jquery.min.js"></script>
	<script src="assets/js/browser.min.js"></script>
	<script src="assets/js/breakpoints.min.js"></script>
	<script src="assets/js/util.js"></script>
	<script src="assets/js/main.js"></script>

	<script>
		(function () {
			const canvas = document.getElementById('network-canvas');
			const ctx = canvas.getContext('2d');
			let width, height;
			let particles = [];

			// CONFIGURATION
			const particleCount = 110;       // Denser network
			const connectionDistance = 140;  // How close to draw lines
			const infectionDistance = 140;   // Infection transmission range (same as lines)
			const particleSpeed = 0.6;       // Speed of movement

			// VISUALS
			const healthyColor = 'rgba(200, 200, 200, 0.6)'; // Grey
			const infectedColor = 'rgba(255, 50, 50, 0.9)';  // Red
			const healthyLine = '200, 200, 200';
			const infectedLine = '255, 50, 50';

			// INFECTION LOGIC
			const infectionChance = 0.02;    // Chance to infect per frame per contact (2%)
			const recoveryTime = 600;        // Frames until recovery (approx 10 seconds @ 60fps)

			// Resize handling
			function resize() {
				width = canvas.width = window.innerWidth;
				height = canvas.height = window.innerHeight;
			}
			window.addEventListener('resize', resize);
			resize();

			// Particle Class
			class Particle {
				constructor() {
					this.x = Math.random() * width;
					this.y = Math.random() * height;
					this.vx = (Math.random() - 0.5) * particleSpeed;
					this.vy = (Math.random() - 0.5) * particleSpeed;
					this.size = Math.random() * 2 + 1;

					this.isInfected = false;
					this.infectionTimer = 0;
				}

				infect() {
					if (!this.isInfected) {
						this.isInfected = true;
						this.infectionTimer = recoveryTime;
					}
				}

				update() {
					// Move
					this.x += this.vx;
					this.y += this.vy;

					// Bounce off edges
					if (this.x < 0 || this.x > width) this.vx *= -1;
					if (this.y < 0 || this.y > height) this.vy *= -1;

					// Handle Infection Timer
					if (this.isInfected) {
						this.infectionTimer--;
						if (this.infectionTimer <= 0) {
							this.isInfected = false; // Recover
						}
					}
				}

				draw() {
					ctx.fillStyle = this.isInfected ? infectedColor : healthyColor;
					ctx.beginPath();
					ctx.arc(this.x, this.y, this.size, 0, Math.PI * 2);
					ctx.fill();
				}
			}

			// Initialize particles
			function initParticles() {
				particles = [];
				for (let i = 0; i < particleCount; i++) {
					let p = new Particle();
					// Randomly infect a few "Patient Zeros"
					if (Math.random() < 0.05) {
						p.infect();
					}
					particles.push(p);
				}
			}
			initParticles();

			// Animation Loop
			function animate() {
				ctx.clearRect(0, 0, width, height);

				// Re-ignite infection if everyone recovers
				if (!particles.some(p => p.isInfected)) {
					// Pick a random lucky winner to restart the outbreak
					particles[Math.floor(Math.random() * particles.length)].infect();
				}

				for (let i = 0; i < particles.length; i++) {
					particles[i].update();
					particles[i].draw();

					// Check connections
					for (let j = i; j < particles.length; j++) {
						const dx = particles[i].x - particles[j].x;
						const dy = particles[i].y - particles[j].y;
						const distance = Math.sqrt(dx * dx + dy * dy);

						if (distance < connectionDistance) {
							// Infection Spread Logic
							if (particles[i].isInfected && !particles[j].isInfected) {
								if (Math.random() < infectionChance) particles[j].infect();
							} else if (!particles[i].isInfected && particles[j].isInfected) {
								if (Math.random() < infectionChance) particles[i].infect();
							}

							// Draw Line
							ctx.beginPath();
							const opacity = 1 - (distance / connectionDistance);

							// If either is infected, line is red
							if (particles[i].isInfected || particles[j].isInfected) {
								ctx.strokeStyle = `rgba(${infectedLine}, ${opacity})`;
							} else {
								ctx.strokeStyle = `rgba(${healthyLine}, ${opacity * 0.5})`; // Fainter lines for healthy
							}

							ctx.lineWidth = 1;
							ctx.moveTo(particles[i].x, particles[i].y);
							ctx.lineTo(particles[j].x, particles[j].y);
							ctx.stroke();
						}
					}
				}
				requestAnimationFrame(animate);
			}
			animate();
		})();
	</script>

	<script src="https://unpkg.com/vis-network/standalone/umd/vis-network.min.js"></script>
	<script>
		(function () {
			const container = document.getElementById('mynetwork');

			const COLORS = {
				healthy: '#444444',
				infected: '#ff073a',
				superspreader: '#ff0000', // Brighter red
				healthyBorder: '#666666',
				text: '#ffffff',
				edge: 'rgba(255, 255, 255, 0.15)'
			};

			// 15 Nodes: Node 2 is the clear superspreader
			const nodes = new vis.DataSet([
				{ id: 1, label: 'P0', shape: 'dot', size: 15 },
				{ id: 2, label: 'S1', shape: 'triangle', size: 30 }, // Larger Staff node
				{ id: 3, label: 'P2', shape: 'dot', size: 15 },
				{ id: 4, label: 'P3', shape: 'dot', size: 15 },
				{ id: 5, label: 'P4', shape: 'dot', size: 15 },
				{ id: 6, label: 'P5', shape: 'dot', size: 15 },
				{ id: 7, label: 'P6', shape: 'dot', size: 15 },
				{ id: 8, label: 'P7', shape: 'dot', size: 15 },
				{ id: 9, label: 'P8', shape: 'dot', size: 15 },
				{ id: 10, label: 'S2', shape: 'triangle', size: 15 },
				{ id: 11, label: 'P9', shape: 'dot', size: 15 },
				{ id: 12, label: 'P10', shape: 'dot', size: 15 },
				{ id: 13, label: 'P11', shape: 'dot', size: 15 },
				{ id: 14, label: 'S3', shape: 'triangle', size: 15 },
				{ id: 15, label: 'P12', shape: 'dot', size: 15 }
			]);

			// Topology: Node 2 connects to almost half the network
			const edges = new vis.DataSet([
				{ id: 'e1', from: 1, to: 2 },
				{ id: 'e2', from: 1, to: 3 },
				// Superspreader burst
				{ id: 's1', from: 2, to: 4 }, { id: 's2', from: 2, to: 5 },
				{ id: 's3', from: 2, to: 6 }, { id: 's4', from: 2, to: 7 },
				{ id: 's5', from: 2, to: 8 }, { id: 's6', from: 2, to: 9 },
				// Standard paths
				{ id: 'e3', from: 3, to: 10 }, { id: 'e4', from: 10, to: 11 },
				{ id: 'e5', from: 4, to: 12 }, { id: 'e6', from: 8, to: 13 },
				{ id: 'e7', from: 13, to: 14 }, { id: 'e8', from: 14, to: 15 }
			]);

			const options = {
				layout: {
					hierarchical: {
						direction: 'UD',
						sortMethod: 'directed',
						levelSeparation: 80,
						nodeSpacing: 100
					}
				},
				physics: { enabled: false },
				edges: {
					arrows: { to: { enabled: true, scaleFactor: 0.8 } },
					color: { color: COLORS.edge, opacity: 0.3 },
					width: 1.5,
					smooth: { type: 'cubicBezier', forceDirection: 'vertical', roundness: 0.4 }
				},
				nodes: {
					font: { color: COLORS.text, face: 'monospace', size: 20, vadjust: -35 },
					borderWidth: 2,
					color: { background: COLORS.healthy, border: COLORS.healthyBorder }
				},
				interaction: { dragNodes: true, zoomView: false, dragView: false }
			};

			const network = new vis.Network(container, { nodes, edges }, options);
			const observer = new ResizeObserver(() => { network.fit(); });
			observer.observe(container);

			let infectedIds = new Set();

			function runSimulation() {
				// Reset
				nodes.forEach(n => nodes.update({ id: n.id, color: { background: COLORS.healthy, border: COLORS.healthyBorder }, shadow: false }));
				edges.forEach(e => edges.update({ id: e.id, color: COLORS.edge, width: 1.5 }));
				infectedIds.clear();

				// Start simulation
				infectNode(1, null);

				let step = 0;
				const spreadInterval = setInterval(() => {
					let targets = [];

					infectedIds.forEach(id => {
						const downstream = edges.get({ filter: (e) => e.from === id });
						downstream.forEach(edge => {
							if (!infectedIds.has(edge.to)) {
								targets.push({ nodeId: edge.to, edgeId: edge.id, sourceId: id });
							}
						});
					});

					if (targets.length > 0) {
						// SPECIAL LOGIC: If the source is Node 2 (Superspreader), infect multiple people at once
						const superspreaderTargets = targets.filter(t => t.sourceId === 2);

						if (superspreaderTargets.length > 0 && infectedIds.has(2)) {
							// Rapid burst: infect all targets of the superspreader in one go
							superspreaderTargets.forEach(t => infectNode(t.nodeId, t.edgeId));
						} else {
							// Standard spread: infect 1 random person
							const t = targets[Math.floor(Math.random() * targets.length)];
							infectNode(t.nodeId, t.edgeId);
						}
					} else {
						clearInterval(spreadInterval);
						setTimeout(runSimulation, 5000);
					}
				}, 1000);
			}

			function infectNode(nodeId, edgeId) {
				infectedIds.add(nodeId);
				const isSuperspreader = (nodeId === 2);

				nodes.update({
					id: nodeId,
					color: { background: COLORS.infected, border: '#ffffff' },
					shadow: {
						enabled: true,
						color: COLORS.infected,
						size: isSuperspreader ? 30 : 12, // Bigger glow for superspreader
						x: 0, y: 0
					}
				});

				if (edgeId) {
					edges.update({ id: edgeId, color: COLORS.infected, width: 3 });
				}
			}

			runSimulation();
		})();
	</script>
</body>

</html>